<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simone Capodivento - Portfolio</title>
    
    <!-- Favicon setup -->
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <!-- Your existing preconnect links -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://raw.githubusercontent.com">

    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Scientific styling (existing styles remain largely the same) */



        .particle {
    will-change: transform, opacity;
    pointer-events: none;
    transform: translateZ(0);
    backface-visibility: hidden;
}

.pdf-card {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
}

#contact {
    will-change: transform;
    transform: translateZ(0);
}

/* Reduce animation complexity at the bottom */
@media (max-height: 1000px) {
    .particle {
        display: none;
    }
}

.particle {
    will-change: transform, opacity;
    pointer-events: none;
}

#scene-container canvas {
    will-change: transform;
}

.project-card {
    will-change: transform;
    backface-visibility: hidden;
    transform: translateZ(0);
}
        .scientific-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, #2D3436, #000000);
            z-index: -2;
        }
        .counter {
            position: fixed; bottom: 10px; left: 10px; font-size: 0.9rem; opacity: 0.6; z-index: 999;
            background: rgba(45, 52, 54, 0.7); padding: 5px 10px; border-radius: 4px;
            backdrop-filter: blur(5px); font-family: 'Share Tech Mono', monospace; color: #48DBF1;
            transition: opacity 0.3s ease;
        }
        .counter:hover { opacity: 1; }
        .scientific-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(72, 219, 251, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(29, 209, 161, 0.1) 0%, transparent 50%);
            pointer-events: none; z-index: -1;
        }
        .particle {
            position: absolute; background: rgba(72, 219, 251, 0.5); border-radius: 50%;
            pointer-events: none; z-index: -1;
        }
        .scientific-text {
            text-shadow: 0 0 10px rgba(72, 219, 251, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 5px rgba(72, 219, 251, 0.5); }
            to { text-shadow: 0 0 15px rgba(29, 209, 161, 0.8); }
        }
        #scene-container { /* Background 3D */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.6; pointer-events: none; /* Added pointer-events none */
        }
        .project-3d-container { /* Project 3D */
            width: 100%; height: 300px; position: relative; margin-top: 1rem;
            border-radius: 0.75rem; overflow: hidden; background: rgba(0, 0, 0, 0.2);
        }
        .tech-font {
            font-family: 'Share Tech Mono', 'Courier New', monospace;
            letter-spacing: 1px; line-height: 1.6;
        }
        .tech-highlight { color: #48DBF1; font-weight: 600; }
        .project-image {
            width: 100%; height: 300px; object-fit: cover; border-radius: 0.75rem;
            margin-top: 1rem; transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 25px rgba(29, 209, 161, 0.2);
        }
        .project-image:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 35px rgba(29, 209, 161, 0.3);
        }
        .project-card {
             /* Simplified transition */
             transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, background-color 0.3s ease-out;
        }
        .project-card:hover {
             transform: translateY(-5px) scale(1.02); /* Adjusted scale slightly */
             box-shadow: 0 15px 30px rgba(29, 209, 161, 0.35);
        }
        .loading-indicator {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #48DBF1; font-size: 1.2rem; text-align: center;
            font-family: 'Share Tech Mono', monospace; z-index: 10; display: none;
        }
        .loading-indicator.visible { display: block; }
        .external-btn {
            display: inline-block; margin-top: 1rem; padding: 0.5rem 1rem;
            background: rgba(72, 219, 251, 0.2); border: 1px solid #48DBF1;
            color: #48DBF1; border-radius: 0.25rem; transition: all 0.3s ease;
            text-decoration: none; font-family: 'Share Tech Mono', monospace;
        }
        .external-btn:hover {
            background: rgba(72, 219, 251, 0.4); transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(72, 219, 251, 0.3);
        }
         .poly-project-container {
             width: 100%; text-align: center; margin-top: 2rem; margin-bottom: 2rem;
         }
         
        /* University Notes specific styles */
        .pdf-card {
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, background-color 0.3s ease-out;
        }
        .pdf-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(29, 209, 161, 0.35);
        }
        .pdf-icon-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80px;
            width: 100%;
            transition: transform 0.3s ease;
        }
        .pdf-card:hover .pdf-icon-container {
            transform: scale(1.1);
        }
        .pdf-btn {
            box-shadow: 0 4px 12px rgba(72, 219, 251, 0.25);
        }
    </style>
</head>
<body class="bg-transparent text-emerald-100 relative tech-font">
    <div class="scientific-background"></div>
    <div class="scientific-overlay"></div>
    <div id="scene-container"></div> <header class="sticky top-0 z-50 p-6 flex justify-between items-center backdrop-blur-md bg-opacity-30 bg-gray-900 shadow-lg">
        <div class="flex items-center space-x-4">
            <img src="https://raw.githubusercontent.com/Capodivento/Website/main/1706100440515.jpeg" alt="Simone's Profile Picture" class="w-16 h-16 md:w-20 md:h-20 rounded-full ring-2 ring-emerald-400 shadow-md" width="80" height="80">
            <h1 class="text-2xl md:text-3xl font-bold scientific-text">Simone's Portfolio</h1>
        </div>
        <nav>
            <ul class="flex space-x-4 md:space-x-6 text-sm md:text-base">
                <li><a href="#hero" class="hover:text-emerald-300 transition-colors scientific-text">Home</a></li>
                <li><a href="#projects" class="hover:text-emerald-300 transition-colors scientific-text">Projects</a></li>
                <li><a href="#university-notes" class="hover:text-emerald-300 transition-colors scientific-text">Notes</a></li>
                <li><a href="#contact" class="hover:text-emerald-300 transition-colors scientific-text">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
    <section id="hero" class="min-h-screen flex flex-col items-center justify-center text-center px-4 pt-24 pb-12">
        <div>
            <h2 class="text-4xl sm:text-5xl font-extrabold scientific-text mb-6">I'M SIMO</h2>
            <p class="mt-4 text-base sm:text-lg tracking-wider">
                I LIKE TO BUILD THINGS WITH <span class="tech-highlight">CODE.</span>
            </p>
            <p class="mt-6 text-base sm:text-lg tracking-wider max-w-2xl mx-auto">
                SOME OF MY INTERESTS ARE: <span class="tech-highlight">DESIGN</span>,
                <span class="tech-highlight">WEB DEVELOPMENT</span>,
                <span class="tech-highlight">ANDROID DEVELOPMENT</span>,
                <span class="tech-highlight">COMPUTER GRAPHICS</span> AND
                <span class="tech-highlight">ANIMATION</span>.
            </p>
            <p class="mt-8 text-base sm:text-lg">
                YOU CAN FIND HERE SOME OF THE PROJECTS I'VE WORKED ON.
            </p>
             <div class="mt-12 animate-bounce">
                 <a href="#projects" aria-label="Scroll to projects">
                      <i class="fas fa-chevron-down text-3xl text-emerald-400 opacity-70 hover:opacity-100 transition-opacity"></i>
                 </a>
             </div>
        </div>
    </section>

    <section id="projects" class="p-8 md:p-12">
    <h2 class="text-3xl md:text-4xl font-bold scientific-text mb-12 text-center">Projects</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

        <!-- Desk Project -->
        <div class="project-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col h-full">
            <div class="flex-grow">
                <h3 class="text-xl md:text-2xl font-semibold mb-4 tech-highlight">MY DESK RIGHT NOW</h3>
                <p class="mt-2 mb-4 text-emerald-200 text-sm md:text-base">A 3D visualization of my desk setup.</p>
            </div>
            <div class="w-full h-64 flex items-center justify-center overflow-hidden rounded-lg bg-black/20">
                <img src="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Screenshot%202025-03-27%20at%2018.38.40.png"
                     alt="Blender 3D render of a desk setup"
                     class="w-full h-full object-cover rounded-lg transition-transform duration-300 hover:scale-105"
                     loading="lazy" decoding="async" width="600" height="300"
                     style="object-position: center 40%;">
            </div>
        </div>
        <!-- Amsterdam Bedroom -->
        <div class="project-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col h-full">
            <div class="flex-grow">
                <h3 class="text-xl md:text-2xl font-semibold mb-4 tech-highlight">AMSTERDAM BEDROOM</h3>
                <p class="mt-2 mb-4 text-emerald-200 text-sm md:text-base">I LIVED IN AMSTERDAM AND THIS IS A 3D BLENDER OF MY BEDROOM.</p>
            </div>
            <div class="w-full h-64">
                <img src="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Screenshot%202025-04-02%20at%2017.59.25.jpg"
                     alt="Abstract design concept visualization"
                     class="w-full h-full object-cover rounded-lg"
                     loading="lazy" decoding="async" width="600" height="300">
            </div>
        </div>

        <!-- Modern House -->
        <div class="project-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col h-full">
            <div class="flex-grow">
                <h3 class="text-xl md:text-2xl font-semibold mb-4 tech-highlight">MODERN HOUSE</h3>
                <p class="mt-2 mb-4 text-emerald-200 text-sm md:text-base">A detailed 3D render of a modern house created in Blender.</p>
            </div>
            <div class="w-full h-64">
                <img src="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Screenshot%202025-05-12%20at%2017.28.15.png"
                     alt="Blender 3D render of a dining room interior"
                     class="w-full h-full object-cover rounded-lg"
                     loading="lazy" decoding="async" width="600" height="300">
            </div>
        </div>


        <!-- Dutch Houses -->
<div class="project-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col h-full">
    <div class="flex-grow">
        <h3 class="text-xl md:text-2xl font-semibold mb-4 tech-highlight">DUTCH HOUSES</h3>
        <p class="mt-2 mb-4 text-emerald-200 text-sm md:text-base">3D render of traditional Dutch houses created in Blender.</p>
    </div>
    <div class="w-full h-64">
        <img src="https:https://github.com/Capodivento/Simone-s-Portfolio/blob/main/Screenshot%202025-06-22%20at%2013.25.56.png"
             alt="3D render of Dutch houses"
             class="w-full h-full object-cover rounded-lg"
             loading="lazy"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400/1e293b/48dbf1?text=Dutch+Houses+3D+Render'">
    </div>
</div>
        </div>
         <!-- Add this next to your existing poly-project-container div -->
<div class="poly-project-container flex justify-center space-x-4">
    <a href="https://capodivento.github.io/Poly/" 
       target="_blank" 
       rel="noopener noreferrer" 
       class="external-btn">
        View Poly Project <i class="fas fa-external-link-alt ml-1"></i>
    </a>

</div>
    </section>

    <!-- Fixed University Notes Section -->
   <section id="university-notes" class="p-8 md:p-12 bg-gray-900 bg-opacity-20 backdrop-blur-md">
        <h2 class="text-3xl md:text-4xl font-bold scientific-text mb-12 text-center">University Notes</h2>
        <p class="text-center mb-8 text-emerald-200 max-w-2xl mx-auto">
            Here are some of my university notes and study materials. Click on any button to download the PDF.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Integrals</h3>
                    <p class="text-sm text-emerald-200 mb-4">Comprehensive notes on integral calculus, covering definite and indefinite integrals, techniques of integration, and applications.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Integrals.pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Probability & Statistics</h3>
                    <p class="text-sm text-emerald-200 mb-4">Detailed notes covering probability theory, statistical distributions, hypothesis testing, and data analysis techniques.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <div class="flex gap-4">
                        <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Probability_statistics.pdf" 
                           target="_blank" rel="noopener noreferrer" 
                           class="pdf-btn flex-1 py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                                  transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                                  hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                            <i class="fas fa-download mr-2"></i> Part 1
                        </a>
                        <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/statistic%20%26%20probability%232.pdf" 
                           target="_blank" rel="noopener noreferrer" 
                           class="pdf-btn flex-1 py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                                  transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                                  hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                            <i class="fas fa-download mr-2"></i> Part 2
                        </a>
                    </div>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Vectors</h3>
                    <p class="text-sm text-emerald-200 mb-4">Notes on vectors and their applications in mathematics and physics.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Vectors%20(1).pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Trigonometry</h3>
                    <p class="text-sm text-emerald-200 mb-4">Comprehensive notes on trigonometric functions, identities, equations, and their applications in various mathematical contexts.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Trigonometry.pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Matrices</h3>
                    <p class="text-sm text-emerald-200 mb-4">Comprehensive notes on matrix operations, transformations, and their applications in linear algebra.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Matrices.pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Alternate Coordinate Systems</h3>
                    <p class="text-sm text-emerald-200 mb-4">Notes covering different coordinate systems.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://github.com/Capodivento/Simone-s-Portfolio/blob/main/Alternate_coordinate_systems.pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

            <div class="pdf-card bg-gray-900 bg-opacity-20 p-6 rounded-lg backdrop-blur-md hover:bg-opacity-30 flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20">
                <div class="flex-grow w-full">
                    <h3 class="text-xl font-semibold mb-3 tech-highlight">Differential Equations & Integrals</h3>
                    <p class="text-sm text-emerald-200 mb-4">Notes covering topics in differential equations and integral calculus.</p>
                    <div class="pdf-icon-container mb-4">
                        <i class="far fa-file-pdf text-5xl text-emerald-400 transition-transform duration-300 group-hover:scale-110"></i>
                    </div>
                    <a href="https://raw.githubusercontent.com/Capodivento/Simone-s-Portfolio/main/Differential_Equation_and_Integrals.pdf" 
                       target="_blank" rel="noopener noreferrer" 
                       class="pdf-btn block w-full py-2 px-4 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg
                              transition-all duration-300 hover:from-emerald-500 hover:to-cyan-500 hover:shadow-lg
                              hover:shadow-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <i class="fas fa-download mr-2"></i> Download PDF
                    </a>
                </div>
            </div>

        </div>
    </section>

    <section id="contact" class="p-8 md:p-12 text-center backdrop-blur-sm bg-opacity-10 bg-gray-900">
    <h2 class="text-3xl md:text-4xl font-bold scientific-text">Contact</h2>
    <p class="mt-4 text-sm md:text-base">Check me out here.</p>
    <div class="mt-6 flex justify-center space-x-6">
        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" aria-label="Instagram Profile" class="hover:text-emerald-300 transition-colors transform hover:scale-110">
             <i class="fab fa-instagram text-3xl"></i>
        </a>
        <a href="https://www.linkedin.com/in/simone-capodivento-a31497235/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn Profile" class="hover:text-emerald-300 transition-colors transform hover:scale-110">
             <i class="fab fa-linkedin text-3xl"></i>
        </a>
        <a href="https://github.com/Capodivento" target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile" class="hover:text-emerald-300 transition-colors transform hover:scale-110">
             <i class="fab fa-github text-3xl"></i>
        </a>
        <a href="https://leetcode.com/u/simonecapodivento311/" target="_blank" rel="noopener noreferrer" aria-label="LeetCode Profile" class="hover:text-emerald-300 transition-colors transform hover:scale-110">
             <i class="fas fa-code text-3xl"></i>
        </a>
        <a href="https://www.strava.com/athletes/166666006" target="_blank" rel="noopener noreferrer" aria-label="Strava Profile" class="hover:text-emerald-300 transition-colors transform hover:scale-110">
             <i class="fab fa-strava text-3xl"></i>
        </a>
    </div>
</section>
</main> 

    <footer class="p-6 text-center text-emerald-300 backdrop-blur-sm bg-opacity-20 bg-gray-900 text-sm">
        <p>&copy; <span id="current-year"></span> Simone Capodivento. All rights reserved.</p>
    </footer>

    <!-- Aggiungi questo script prima della chiusura del </head> -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- Modifica il div del contatore così: -->
<div class="counter tech-font">
    <span id="busuanzi_container_site_pv">
        <span id="busuanzi_value_site_pv"></span> Views
    </span>
</div>

    <script defer>
        // --- Global Variables & Flags ---
        let backgroundScene, backgroundCamera, backgroundRenderer, backgroundShapes = [], backgroundMouse = new THREE.Vector2(), targetCameraPos = new THREE.Vector3();
        let projectScene, projectCamera, projectRenderer, projectMesh, projectWireframe;
        let isProjectDragging = false;
        let backgroundAnimationId, projectAnimationId;
        let particleIntervalId;

        const projectContainer = document.getElementById('project-3d-container');
        const projectLoader = document.getElementById('project-3d-loader');

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);
            setCopyrightYear();
            setupHeroAnimation();
            setupScrollTriggers();
            setupBackgroundScene();
            setupProject3DObserver();
            setupEventListeners();
            startAnimations(); // Start initially
            startParticleEffect();
        });

        // --- Setup Functions ---

        function setCopyrightYear() {
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }
        }

        function setupHeroAnimation() {
            gsap.from("header", { duration: 1, y: -100, opacity: 0, ease: "power3.out"});
            gsap.from("#hero h2", { duration: 1.5, y: -50, opacity: 0, ease: "power3.out", delay: 0.5 });
            gsap.from("#hero p", { duration: 1.5, y: 30, opacity: 0, ease: "power3.out", delay: 0.8, stagger: 0.2 });
            gsap.from("#hero .fa-chevron-down", { duration: 1, y: -20, opacity: 0, ease: "bounce.out", delay: 1.5 });
        }

        function setupScrollTriggers() {
            gsap.utils.toArray('.project-card').forEach((card, i) => {
                gsap.from(card, {
                    scrollTrigger: {
                        trigger: card,
                        start: "top 85%", // Start animation slightly later
                        toggleActions: "play none none none",
                        once: true // Optional: Animate only once
                    },
                    opacity: 0, y: 50, scale: 0.95, duration: 0.7, delay: i * 0.1, ease: "power3.out"
                });
            });

            // Add animation for university notes cards
            gsap.utils.toArray('.pdf-card').forEach((card, i) => {
                gsap.from(card, {
                    scrollTrigger: {
                        trigger: card,
                        start: "top 85%",
                        toggleActions: "play none none none",
                        once: true
                    },
                    opacity: 0, 
                    y: 50, 
                    scale: 0.95, 
                    duration: 0.7, 
                    delay: i * 0.1, 
                    ease: "power3.out"
                });
            });

            gsap.from("#contact h2", {
                 scrollTrigger: { trigger: "#contact", start: "top 80%" },
                 opacity: 0, y: 30, duration: 1, ease: "power3.out"
            });
            gsap.from("#contact p", {
                 scrollTrigger: { trigger: "#contact", start: "top 75%" },
                 opacity: 0, y: 30, duration: 1, delay: 0.2, ease: "power3.out"
            });
            gsap.from("#contact .fab, #contact .fas", {
                 scrollTrigger: { trigger: "#contact", start: "top 70%" },
                 opacity: 0, scale: 0.5, duration: 0.6, delay: 0.4, stagger: 0.15, ease: "back.out(1.7)"
            });
        }

        function setupBackgroundScene() {
            const container = document.getElementById('scene-container');
            if (!container) return;

            backgroundScene = new THREE.Scene();
            backgroundCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            backgroundRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

            backgroundRenderer.setSize(window.innerWidth, window.innerHeight);
            backgroundRenderer.setPixelRatio(window.devicePixelRatio); // Added for sharpness
            container.appendChild(backgroundRenderer.domElement);

            const geometries = [
                new THREE.IcosahedronGeometry(1.2, 0),
                new THREE.DodecahedronGeometry(1.0, 0),
                new THREE.OctahedronGeometry(1.1, 0)
            ];

            for (let i = 0; i < 12; i++) {
                const geometry = geometries[Math.floor(Math.random() * geometries.length)];
                const material = new THREE.MeshPhongMaterial({
                    color: Math.random() > 0.5 ? 0x1DD1A1 : 0x48DBF1,
                    wireframe: true, transparent: true, opacity: 0.35, shininess: 10
                });
                const shape = new THREE.Mesh(geometry, material);
                shape.position.set(
                    (Math.random() - 0.5) * 30,
                    (Math.random() - 0.5) * 30,
                    (Math.random() - 0.5) * 30 - 10
                );
                shape.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);
                shape.scale.setScalar(Math.random() * 0.5 + 0.8);
                backgroundShapes.push(shape);
                backgroundScene.add(shape);
            }

            // Lighting
            backgroundScene.add(new THREE.AmbientLight(0xffffff, 0.6));
            const pointLight = new THREE.PointLight(0x48DBF1, 1.2, 100);
            pointLight.position.set(5, 15, 15);
            backgroundScene.add(pointLight);
            const directionalLight = new THREE.DirectionalLight(0x1DD1A1, 0.5);
            directionalLight.position.set(-10, -5, -10);
            backgroundScene.add(directionalLight);

            backgroundCamera.position.z = 12;
        }

        function setupProject3DObserver() {
             if (!projectContainer) {
                 console.error("Project 3D container not found for IntersectionObserver.");
                 return;
             }
            const projectObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Delay slightly to ensure container dimensions are stable
                        setTimeout(() => {
                            if (!projectScene) { // Initialize only if not already done
                                initProject3D();
                            } else if (!projectAnimationId) { // Resume if already initialized but paused
                                startProjectAnimation();
                            }
                        }, 150);
                    } else {
                         // Optional: Pause project animation when it scrolls out of view
                         // Be careful if you want it to keep animating slightly out of view
                         // stopProjectAnimation();
                    }
                });
            }, { threshold: 0.1 }); // Trigger when 10% visible

            projectObserver.observe(projectContainer);
        }


        function initProject3D() {
            if (!projectContainer || projectScene) return; // Don't re-initialize
            if(projectLoader) projectLoader.classList.add('visible');

            const projWidth = projectContainer.clientWidth;
            const projHeight = projectContainer.clientHeight;

            if (projWidth <= 0 || projHeight <= 0) {
                console.warn("Project container has zero/invalid dimensions. Cannot initialize 3D scene yet.");
                 if(projectLoader) projectLoader.classList.remove('visible');
                // Consider retrying later or logging an error
                return;
            }

            projectScene = new THREE.Scene();
            projectCamera = new THREE.PerspectiveCamera(60, projWidth / projHeight, 0.1, 1000);
            projectRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            projectRenderer.setSize(projWidth, projHeight);
            projectRenderer.setPixelRatio(window.devicePixelRatio);
            projectContainer.appendChild(projectRenderer.domElement);

            // Custom Geometry (as before)
            const mainGeometry = createCustomGeometry();
            const mainMaterial = new THREE.MeshStandardMaterial({
                color: 0x48DBF1, metalness: 0.3, roughness: 0.6,
                transparent: true, opacity: 0.9, side: THREE.DoubleSide
            });
            projectMesh = new THREE.Mesh(mainGeometry, mainMaterial);
            projectMesh.scale.set(0.8, 0.8, 0.8);
            projectScene.add(projectMesh);

            const edges = new THREE.EdgesGeometry(mainGeometry);
            const wireMaterial = new THREE.LineBasicMaterial({ color: 0xbae6fd, transparent: true, opacity: 0.7 });
            projectWireframe = new THREE.LineSegments(edges, wireMaterial);
            projectWireframe.scale.copy(projectMesh.scale);
            projectScene.add(projectWireframe);

            // Lighting
            projectScene.add(new THREE.AmbientLight(0xffffff, 0.5));
            const projPointLight = new THREE.PointLight(0xffffff, 0.8, 100);
            projPointLight.position.set(5, 5, 5);
            projectScene.add(projPointLight);
            const projDirectionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
            projDirectionalLight.position.set(-5, 3, 2);
            projectScene.add(projDirectionalLight);

            projectCamera.position.z = 4;

            setupProjectDragInteraction(); // Setup interaction after elements are created

             if(projectLoader) projectLoader.classList.remove('visible');
             startProjectAnimation(); // Start animation loop for this scene
        }

         function createCustomGeometry() {
             // Same geometry creation logic as before
             const geometry = new THREE.BufferGeometry();
             const vertices = new Float32Array([
                 -1.0, -1.0, 1.0,  1.0, -1.0, 1.0,  1.0,  1.0, 1.0, -1.0,  1.0, 1.0, // Front face
                 -1.0, -1.0,-1.0,  1.0, -1.0,-1.0,  1.0,  1.0,-1.0, -1.0,  1.0,-1.0, // Back face
                  0.0,  2.0, 0.0,  2.0,  0.0, 0.0, -2.0,  0.0, 0.0,  0.0,  0.0, 2.0, // Spikes/Points
                  0.0,  0.0,-2.0
             ]);
             // Indices need careful checking if vertices change. This set assumes 13 vertices (0-12).
             const indices = [
                  0, 1, 2,   0, 2, 3,    // Front
                  1, 5, 6,   1, 6, 2,    // Right
                  5, 4, 7,   5, 7, 6,    // Back
                  4, 0, 3,   4, 3, 7,    // Left
                  // Connections to extra points (adjust if needed based on desired shape)
                  3, 2, 8,   2, 6, 8,    // Top point connections
                  4, 5, 12,  0, 4, 10,   // Side/Bottom connections (check vertex indices)
                  1, 0, 11,  5, 1, 9,
                  // Example: Connect side points (may need adjustment)
                  8, 3, 7,   8, 6, 7,    // Connect top point down
                  9, 1, 2,   9, 5, 6,    // Connect right point
                  10,4, 0,   10,7, 3,   // Connect left point
                  11,0, 1,   11,3, 2,   // Connect front point
                  12,4, 5,   12,7, 6    // Connect back point
             ];
             geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3));
             geometry.setIndex(indices);
             try {
                geometry.computeVertexNormals(); // Important for lighting
             } catch (e) {
                console.error("Error computing vertex normals, check geometry indices:", e);
             }
             return geometry;
         }

        function setupEventListeners() {
            // Background mouse move
            window.addEventListener('mousemove', onBackgroundMouseMove, { passive: true }); // Use passive listener

            // Window Resize
            window.addEventListener('resize', onWindowResize);

            // Page Visibility
            document.addEventListener('visibilitychange', handleVisibilityChange);
        }

         function setupProjectDragInteraction() {
             if (!projectContainer) return;
             let previousMousePosition = { x: 0, y: 0 };
             projectContainer.style.cursor = 'grab';

             projectContainer.addEventListener('mousedown', (e) => {
                 isProjectDragging = true;
                 previousMousePosition = { x: e.clientX, y: e.clientY };
                 projectContainer.style.cursor = 'grabbing';
                 // Prevent text selection during drag
                 e.preventDefault();
             });

             // Use document for mousemove/mouseup to catch events outside the container
             document.addEventListener('mousemove', (e) => {
                 if (!isProjectDragging || !projectMesh) return;
                 const currentMousePosition = { x: e.clientX, y: e.clientY };
                 const deltaMove = {
                     x: currentMousePosition.x - previousMousePosition.x,
                     y: currentMousePosition.y - previousMousePosition.y
                 };
                 const rotateSpeed = 0.007;
                 // Apply rotation relative to the camera's view
                 const deltaRotationQuaternion = new THREE.Quaternion()
                     .setFromEuler(new THREE.Euler(deltaMove.y * rotateSpeed, deltaMove.x * rotateSpeed, 0, 'XYZ'));
                 projectMesh.quaternion.multiplyQuaternions(deltaRotationQuaternion, projectMesh.quaternion);
                 if (projectWireframe) {
                    projectWireframe.quaternion.copy(projectMesh.quaternion);
                 }
                 previousMousePosition = currentMousePosition;
             });

             document.addEventListener('mouseup', () => {
                 if (isProjectDragging) {
                     isProjectDragging = false;
                     projectContainer.style.cursor = 'grab';
                 }
             });

             // Optional: Touch events for mobile
              projectContainer.addEventListener('touchstart', (e) => {
                 if (e.touches.length === 1) {
                     isProjectDragging = true;
                     previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                     projectContainer.style.cursor = 'grabbing';
                     e.preventDefault(); // Prevent scrolling while dragging object
                 }
             }, { passive: false }); // Need passive: false to call preventDefault

             document.addEventListener('touchmove', (e) => {
                 if (!isProjectDragging || !projectMesh || e.touches.length !== 1) return;
                 const currentMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                 const deltaMove = {
                     x: currentMousePosition.x - previousMousePosition.x,
                     y: currentMousePosition.y - previousMousePosition.y
                 };
                 const rotateSpeed = 0.008; // Slightly adjust speed for touch if needed
                  const deltaRotationQuaternion = new THREE.Quaternion()
                     .setFromEuler(new THREE.Euler(deltaMove.y * rotateSpeed, deltaMove.x * rotateSpeed, 0, 'XYZ'));
                 projectMesh.quaternion.multiplyQuaternions(deltaRotationQuaternion, projectMesh.quaternion);
                  if (projectWireframe) {
                    projectWireframe.quaternion.copy(projectMesh.quaternion);
                 }
                 previousMousePosition = currentMousePosition;
                 e.preventDefault(); // Prevent scrolling while dragging object
             }, { passive: false }); // Need passive: false to call preventDefault

             document.addEventListener('touchend', () => {
                 if (isProjectDragging) {
                     isProjectDragging = false;
                     projectContainer.style.cursor = 'grab';
                 }
             });
         }


        // --- Event Handlers ---

        function onBackgroundMouseMove(event) {
            backgroundMouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            backgroundMouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            // Update target camera position slightly based on mouse
            targetCameraPos.x = backgroundMouse.x * 1.0; // Reduced influence
            targetCameraPos.y = backgroundMouse.y * 1.0; // Reduced influence
        }

        function onWindowResize() {
            // Background resize
            if (backgroundCamera && backgroundRenderer) {
                backgroundCamera.aspect = window.innerWidth / window.innerHeight;
                backgroundCamera.updateProjectionMatrix();
                backgroundRenderer.setSize(window.innerWidth, window.innerHeight);
                // No need to setPixelRatio again unless it changes dynamically
            }

            // Project 3D resize
            if (projectCamera && projectRenderer && projectContainer) {
                const projWidth = projectContainer.clientWidth;
                const projHeight = projectContainer.clientHeight;
                if (projWidth > 0 && projHeight > 0) {
                    projectCamera.aspect = projWidth / projHeight;
                    projectCamera.updateProjectionMatrix();
                    projectRenderer.setSize(projWidth, projHeight);
                }
            }
        }

        function handleVisibilityChange() {
            if (document.hidden) {
                stopAnimations(); // Pause when tab is hidden
                stopParticleEffect();
            } else {
                startAnimations(); // Resume when tab is visible
                startParticleEffect();
            }
        }

        // --- Animation Control ---

        function startAnimations() {
            if (!backgroundAnimationId && backgroundScene) {
                animateBackground();
            }
            // Only start project animation if it has been initialized
            if (!projectAnimationId && projectScene) {
                 startProjectAnimation();
            }
        }

        function stopAnimations() {
            if (backgroundAnimationId) {
                cancelAnimationFrame(backgroundAnimationId);
                backgroundAnimationId = null;
            }
             stopProjectAnimation();
        }

         function startProjectAnimation() {
            if (!projectAnimationId && projectScene && projectRenderer) {
                 animateProject();
            }
         }

         function stopProjectAnimation() {
             if (projectAnimationId) {
                cancelAnimationFrame(projectAnimationId);
                projectAnimationId = null;
             }
         }

        // --- Animation Loops ---

        function animateBackground() {
            backgroundAnimationId = requestAnimationFrame(animateBackground);

            // Smooth camera movement towards target
            backgroundCamera.position.x += (targetCameraPos.x - backgroundCamera.position.x) * 0.03;
            backgroundCamera.position.y += (targetCameraPos.y + 1 - backgroundCamera.position.y) * 0.03; // Adjust vertical offset if needed
            backgroundCamera.lookAt(backgroundScene.position);

            backgroundShapes.forEach((shape, index) => {
                shape.rotation.x += 0.001 + index * 0.00005;
                shape.rotation.y += 0.002 + index * 0.00005;
            });
            backgroundRenderer.render(backgroundScene, backgroundCamera);
        }

        function animateProject() {
            if (!projectScene) return; // Should not happen if called correctly, but safe check
            projectAnimationId = requestAnimationFrame(animateProject);

            // Continuous rotation when not dragging
            if (!isProjectDragging && projectMesh) {
                projectMesh.rotation.y += 0.002;
                 if (projectWireframe) projectWireframe.rotation.y += 0.002;
            }

            projectRenderer.render(projectScene, projectCamera);
        }

        // --- Particle Effect ---
// Replace your current particle effect code with this optimized version:

function createParticle() {
    // Limit total particles
    const maxParticles = 50;
    const currentParticles = document.querySelectorAll('.particle').length;
    
    if (currentParticles >= maxParticles) return;

    const particle = document.createElement('div');
    particle.className = 'particle';
    const size = Math.random() * 3 + 1;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    
    // Create particles only in viewport
    const viewportHeight = window.innerHeight;
    const viewportWidth = window.innerWidth;
    
    gsap.set(particle, {
        x: Math.random() * viewportWidth,
        y: Math.random() * viewportHeight,
        opacity: 1
    });

    document.body.appendChild(particle);

    gsap.to(particle, {
        y: `random(-100, 100)`,
        x: `random(-100, 100)`,
        opacity: 0,
        duration: 3,
        ease: "power1.out",
        onComplete: () => particle.remove()
    });
}

function startParticleEffect() {
    if (!particleIntervalId) {
        createParticle();
        // Increase interval time to reduce frequency
        particleIntervalId = setInterval(createParticle, 500);
    }
}

// Add this new function for scroll performance
function handleScroll() {

    const scrollPosition = window.scrollY + window.innerHeight;
    const scrollThreshold = document.documentElement.scrollHeight - 500; // Increased threshold
    
    if (scrollPosition > scrollThreshold) {
        stopAllAnimations();
    } else {
        resumeAllAnimations();
    }
}

function stopAllAnimations() {
    // Stop particles
    stopParticleEffect();
    // Reduce background animation framerate
    if (backgroundScene) {
        backgroundRenderer.setAnimationLoop(null);
    }
    // Stop project animation if visible
    if (projectScene) {
        projectRenderer.setAnimationLoop(null);
    }
}
function resumeAllAnimations() {
    // Resume particles with reduced count
    startParticleEffect(30); // Reduced particle count
    // Resume background animation
    if (backgroundScene) {
        backgroundRenderer.setAnimationLoop(animateBackground);
    }
    // Resume project animation if visible
    if (projectScene) {
        projectRenderer.setAnimationLoop(animateProject);
    }
}

// Optimize particle effect
function startParticleEffect(maxCount = 30) {
    if (particleIntervalId) return;
    
    particleIntervalId = setInterval(() => {
        const currentParticles = document.querySelectorAll('.particle').length;
        if (currentParticles < maxCount) {
            createParticle();
        }
    }, 1000); // Increased interval
}

    // Throttle scroll events


    // Add throttle function
function throttle(func, limit) {
    let inThrottle;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            requestAnimationFrame(() => inThrottle = false);
        }
    }
}

// Use throttled scroll handler
window.addEventListener('scroll', throttle(handleScroll, 100), { passive: true });


    if (!handleScroll.throttleTimer) {
        handleScroll.throttleTimer = setTimeout(() => {
            // Check if near bottom
            const bottomThreshold = 100;
            const isNearBottom = (window.innerHeight + window.scrollY) >= document.documentElement.scrollHeight - bottomThreshold;
            
            if (isNearBottom) {
                // Reduce animations when near bottom
                stopParticleEffect();
            } else {
                // Resume animations when not near bottom
                startParticleEffect();
            }
            handleScroll.throttleTimer = null;
        }, 100);
    }
}

// Add this to your setupEventListeners function:
function setupEventListeners() {
    // ...existing listeners...
    
    // Add scroll listener
    window.addEventListener('scroll', handleScroll, { passive: true });
}


// Optimize animation loops
function animateBackground() {
    if (!document.hidden && backgroundScene) {
        backgroundAnimationId = requestAnimationFrame(animateBackground);
        
        // Reduce calculations
        const lerpFactor = 0.03;
        backgroundCamera.position.x += (targetCameraPos.x - backgroundCamera.position.x) * lerpFactor;
        backgroundCamera.position.y += (targetCameraPos.y + 1 - backgroundCamera.position.y) * lerpFactor;
        backgroundCamera.lookAt(backgroundScene.position);

        // Optimize shape rotations
        const baseRotation = 0.001;
        backgroundShapes.forEach((shape, index) => {
            shape.rotation.x += baseRotation;
            shape.rotation.y += baseRotation;
        });
        
        backgroundRenderer.render(backgroundScene, backgroundCamera);
    }
}
function updateBackgroundComplexity() {
    if (!backgroundScene) return;
    
    const scrollPosition = window.scrollY + window.innerHeight;
    const scrollThreshold = document.documentElement.scrollHeight - 500;
    
    if (scrollPosition > scrollThreshold) {
        // Reduce number of visible shapes
        backgroundShapes.forEach((shape, index) => {
            if (index > 5) shape.visible = false;
        });
        // Lower render quality
        backgroundRenderer.setPixelRatio(1.0);
    } else {
        // Restore shapes and quality
        backgroundShapes.forEach(shape => shape.visible = true);
        backgroundRenderer.setPixelRatio(window.devicePixelRatio);
    }
}

// Add to your scroll handler
function handleScroll() {
    // ...existing code...
    updateBackgroundComplexity();
}

    </script>

</body>
</html>
